<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>BookList</title>
    <link rel="stylesheet" type="text/css" href="./css/basic.css" />
    <link rel="stylesheet" href="./css/font.css" />
  </head>
  <body>

    <!-- 顶部导航 -->
    <nav>
     <div class="nav-wrapper">
       <a href="#" class="brand-logo">信息列表</a>
     </div>
   </nav>


   <!-- 小说列表 class="collection" -->
    <ul id="bookList">
      <!-- <li class="collection-item">Alvin <i class="close-btn">×</i> </li> -->
      <!--<li class="collection-item">Alvin</li>
      <li class="collection-item">Alvin</li>
      <li class="collection-item">Alvin</li> -->
    </ul>

    <!-- 没数据提示 -->
    <h3 class="space-section"> 暂无信息，请添加信息 </h3>

    <script>
      const electron = require('electron');
      const { ipcRenderer } = electron;
      const ul = document.querySelector('#bookList');
      const spaceSection = document.querySelector('.space-section');  // .style.display = 'block';

      // 接收 add 窗口的数据 book:add
      ipcRenderer.on('book:add', (e, val) => {
        const li = document.createElement('li');
        ul.className = 'collection'
        li.className = 'collection-item';
        li.innerHTML = val+'<i class="close-btn">×</i>';
        ul.appendChild(li);
        spaceSection.style.display = 'none';
        listener()
      });

      // 接收 清空的事件 清除所有的列表数据
      ipcRenderer.on('book:clear',(e, val) => {
        ul.innerHTML = '';
        spaceSection.style.display = 'block';
      });

      //监听 点击删除按钮删除
      function listener(){
        document.querySelectorAll('.close-btn').forEach(v => {
          v.addEventListener('click', function(){
            this.parentNode.remove();
            // 清除样式
            if(ul.children.length == 0){
              ul.classList.remove('collection');
              spaceSection.style.display = 'block';
            }
          })
        })
      }

    </script>

    <style>
      .space-section{ text-align:center; color:#666; font-size: 18px; height: 100px; line-height: 100px; }
      #bookList li{position: relative;}
      #bookList li .close-btn{position: absolute;right:10px;width:30px;height:30px;text-align: center;cursor: pointer; font-size: 25px; top:7px;color:#ccc;}
      #bookList li .close-btn:hover{color:#333;}
    </style>
  </body>
</html>
